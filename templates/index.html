<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Ofertowania - Multi-Template</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Template Selector Screen -->
    <div id="template-selector" class="template-selector">
        <div class="template-selector-overlay">
            <div class="template-selector-content">
                <h1>ğŸ“‹ Wybierz szablon oferty</h1>
                <p class="subtitle">Wybierz szablon, ktÃ³ry chcesz uÅ¼yÄ‡ do utworzenia oferty</p>

                <div id="template-options" class="template-options">
                    <!-- Dynamically loaded templates -->
                </div>
            </div>
        </div>
    </div>

    <div class="app-container" style="display: none;">
        <!-- Lewa strona - Formularz -->
        <div class="left-panel">
            <header class="panel-header">
                <h1>System Ofertowania</h1>
                <p class="subtitle">UtwÃ³rz profesjonalnÄ… ofertÄ™</p>
            </header>

            <!-- Panel akcji -->
            <div class="action-panel">
                <button id="btn-save" class="btn btn-success">ğŸ’¾ Zapisz</button>
                <button id="btn-load" class="btn btn-info">ğŸ“‚ Wczytaj</button>
                <button id="btn-generate" class="btn btn-warning">ğŸ“„ Generuj DOCX</button>
            </div>

            <!-- Formularz -->
            <div class="form-section">
                <h2>ğŸ“‹ Dane Oferty</h2>
                <form id="offer-form">
                    <div id="form-fields"></div>
                </form>
            </div>

            <!-- Sekcja wyboru produktÃ³w -->
            <div class="products-section">
                <h2>ğŸ›ï¸ Produkty</h2>
                <p class="info-text">Kliknij aby dodaÄ‡ produkty do oferty:</p>
                <div id="products-list" class="products-grid"></div>
            </div>
        </div>

        <!-- Prawa strona - PodglÄ…d -->
        <div class="right-panel">
            <header class="panel-header">
                <h2>ğŸ‘ï¸ PodglÄ…d Oferty</h2>
                <div class="preview-controls">
                    <button id="btn-toggle-kanban" class="btn-small" onclick="toggleKanbanMode()">ğŸ“‹ Kanban</button>
                    <button id="btn-refresh-preview" class="btn-small">ğŸ”„ OdÅ›wieÅ¼</button>
                    <span id="page-counter" class="page-counter">Strona 1 z 1</span>
                </div>
            </header>

            <!-- Nawigacja stron -->
            <div class="pages-navigation">
                <button id="btn-prev-page" class="btn-nav" disabled>â—€ Poprzednia</button>
                <div id="pages-tabs"></div>
                <button id="btn-next-page" class="btn-nav">NastÄ™pna â–¶</button>
            </div>

            <!-- Progress Bar -->
            <div id="progress-container" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <p id="progress-message" class="progress-message">PrzygotowujÄ™...</p>
            </div>

            <!-- PodglÄ…d -->
            <div class="preview-container">
                <div id="preview-page" class="preview-page">
                    <div class="preview-placeholder">
                        <p>WypeÅ‚nij formularz aby zobaczyÄ‡ podglÄ…d</p>
                        <p class="hint">PodglÄ…d aktualizuje siÄ™ automatycznie</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do zapisywania -->
    <div id="save-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Zapisz OfertÄ™</h2>
            <input type="text" id="offer-name" placeholder="Nazwa oferty" class="input-field">
            <button id="btn-confirm-save" class="btn btn-success">Zapisz</button>
        </div>
    </div>

    <!-- Modal do wczytywania -->
    <div id="load-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Wczytaj OfertÄ™</h2>
            <div id="saved-offers-list"></div>
        </div>
    </div>

    <!-- Notyfikacje -->
    <div id="notification" class="notification"></div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
